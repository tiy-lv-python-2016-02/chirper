language: python
python:
- 3.5.1
- 3.4.3
serives:
- postgresql
- memcached
env:
- DJANGO=1.9.5
before_install:
- export DJANGO_SETTINGS_MODULE=chirper.travis-settings
- export PYTHONPATH=$HOME/builds/jeffnb/chirper
- export PIP_USER_MIRRORS=true
install:
- pip install -r requirements.txt
- pip install django==$DJANGO --quiet
- pip install psycopg2 --quiet
before_script:
- psql -c "CREATE DATABASE chirper;" -U postgres
- python manage.py migrate
script:
- coverage run --source='.' manage.py test users chirps api
after_success:
- coveralls
deploy:
  provider: heroku
  api_key:
    secure: W+QEugjrIBW7VD4nUDo+ssaWP0jdYQgrPz9pgPfq9FE3ZjwerKoTniADZ/I1KJIVASyBsJE1/cXdGxLwUB6hJiSxYlao3lja2F9xUAuKa/YBDgkI566iuFXpDOycRrWHP99NT1CBWE8Gonuck6ItJ7HyKOY76wrsSQw1qMh7LEs4MaGmicFPKYEfeclEboxGi5HnP8LYBYL6YzYikygC+fvPPfR5yHmYMVpsR5+2tLjByxcbHEdIXZhKa+nOaR4WCptawDXtMy6gwTTRgY7vsqmVFB7r7+wD0qdPa7/hxRM8pmULqwjJDVoJPafyk1k47U26Joiop6x6N1eP3TQwjc2CYPeUL7UFtQL9CdPtLTJzWSCRJt/IvA8zmmIul+iAFKjoeUOHvAQL4UcfMxr8jOvBZn/gPbdFD2jdCZkPnJJ9apUvWUFWwD6cpPtoxfVByUzDxLYKvu/4ZR7qiTwwMT25w9Sv3NLeIceVBkoDlPF2ujPgJAPg1t4tQQiwW/gKY06TpCQLEHc4Ldaj7cE2Y+xDJg1/onHlZ1UAlapqj9q6uAvWEALjh2CBSm+YtDU+YwIMGfaP5eR3YdlhX1uDGXHLb0Qzt+5tw9jSz+MaHQngLhH6WazdN5swZfkXt8nqlX/rUMuVM3LaAXM8Y6sUYNjM4100GN9FeHAzp91N3zQ=
    app: damp-refuge-62509
    run: "python manage.py migrate"